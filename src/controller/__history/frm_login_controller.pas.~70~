unit frm_login_controller;


interface
uses my_contracts, Vcl.Dialogs, frm_login_service,user_DTO;

type
  TLoginController = class(TInterfacedObject,ILoginController)


  private
    FView : ILoginView;
    FService: ILoginService;
    procedure ProcessarLogin;

  public
    constructor Create(aView: ILoginView);

  end;

implementation



{ TLoginController }

constructor TLoginController.Create(aView: ILoginView);
begin
  Fview := aView;
  FService := TLoginService.Create;
end;



procedure TLoginController.ProcessarLogin();
var ResultadoDTO : TUserDTO;
begin
  ResultadoDTO := TUserDTO.Create;
  ResultadoDTO.Name := FView.GetNome;
  ResultadoDTO := FService.ValidarLogin(ResultadoDTO);

  if ResultadoDTO = nil then begin
    ShowMessage('Usuário não encontrado!');
  end else begin
    ShowMessage('Login realizado com sucesso');
  end;

end;



end.
