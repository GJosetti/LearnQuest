unit frm_menu_admin_view;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, my_contracts, Vcl.StdCtrls, Vcl.ExtCtrls,
  Data.DB, Vcl.Grids, Vcl.DBGrids, frm_menu_admin_controller;

type
  Tfrm_menuAdmin_view = class(TForm, IMenuAdminView)
    pnl_sideMenu_adminMenu: TPanel;
    Escolas: TButton;
    pnl_home_adminMenu: TPanel;
    Home: TButton;
    pnl_escolas_adminMenu: TPanel;
    dbg_escolas: TDBGrid;
    d_Src_escolas: TDataSource;
    procedure FormCreate(Sender: TObject);
    procedure EscolasClick(Sender: TObject);
    procedure HomeClick(Sender: TObject);

  private
    { Private declarations }
    FController: IMenuAdminController;
  public
    { Public declarations }

  end;

var
  frm_menuAdmin_view: Tfrm_menuAdmin_view;

implementation

{$R *.dfm}

procedure Tfrm_menuAdmin_view.EscolasClick(Sender: TObject);
begin
 //MUDAR DE TELA: 1- Deixar home invisivel 2- deixar escola visivel 3 - atualizar tabela de escolas :)
 pnl_home_adminMenu.Visible := false;
 pnl_escolas_adminMenu.Visible := true;
 if Assigned(d_Src_escolas.DataSet) then begin
   d_Src_escolas.DataSet := nil; // limpa antes
 end;
d_Src_escolas.DataSet := FController.AtualizarTabelaEscolas;
  dbg_escolas.DataSource := d_Src_escolas;
  dbg_escolas.Columns.Grid.Width := 100

end;

procedure Tfrm_menuAdmin_view.FormCreate(Sender: TObject);
begin
  FController := TMenuAdminController.Create(Self);
  Self.Position := poScreenCenter;


end;



procedure Tfrm_menuAdmin_view.HomeClick(Sender: TObject);
begin
  pnl_home_adminMenu.Visible := true;
  pnl_escolas_adminMenu.Visible := false;
  //Limpar Lista na memória
end;

end.
